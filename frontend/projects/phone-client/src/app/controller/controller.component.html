<div class="controller" [class.connected]="connected()" [class.game-active]="gameStarted()">
  @if (!connected()) {
    <div class="status">
      <div class="spinner"></div>
      <p>Connecting to game...</p>
    </div>
  } @else if (!gameStarted()) {
    <div class="status">
      <p class="waiting">Waiting for host to start game</p>
      <div class="ready-indicator">Ready</div>
    </div>
  } @else {
    <div class="game-controller">
      <div class="dpad">
        <button
          class="dpad-btn up"
          (pointerdown)="onDpadDown('up')"
          (pointerup)="onDpadUp()"
          (pointerleave)="onDpadUp()"
        >
          ▲
        </button>
        <button
          class="dpad-btn down"
          (pointerdown)="onDpadDown('down')"
          (pointerup)="onDpadUp()"
          (pointerleave)="onDpadUp()"
        >
          ▼
        </button>
      </div>

      <p class="hint">Hold UP or DOWN to move paddle</p>

      <div class="buttons">
        <button
          class="action-btn"
          (pointerdown)="onButtonDown('A')"
          (pointerup)="onButtonUp('A')"
          (pointerleave)="onButtonUp('A')"
        >
          A
        </button>
      </div>
    </div>
  }
</div>
